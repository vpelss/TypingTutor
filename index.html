<!DOCTYPE html>
<html>
<head>
<meta name="description" content="Typing Tutor">    
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Typing Tutor</title>
  <style>
  body { background-color: gray; }
  .tocenter { text-align: center; }
   #letterdisplay { font-size: 25px; }
  #titletext { text-align: center; border-style: } 
  </style>
  <script src="https://code.jquery.com/jquery-3.1.0.js"></script>
</head>
  
<body id='whole'>

<audio jcontrols id='myAudio'>
  <source src="https://www.emogic.com/TypingTutor/A.mp3" type="audio/wav">
Your browser does not support the audio element.
</audio>

<div>  
<pre id='titletext'>Typing Tutor</pre>
</div>

<form class='tocenter'>
  <input type='button' id='what' value='What is this?' onclick='whatIsThis();'>
  <br><br>
  <input type='radio' name="soundsopt" id='letterbeforesound'> Letter before typing - audio
  <br>
  <input type='radio' name="soundsopt" id='letteraftersound'> Letter after typing - audio
  <br>
  <input type='radio' name="soundsopt" id='errorsound'> Error Audio
  <br>
  <input type='checkbox' id='ignorecase'> Ignore Case
  <br>
<textarea id='inputtextbox' rows="4" cols="50">
Insert practice text you wish to type here. Place cursor where you want to start typing.
</textarea>  
<br>
<textarea id='outputtextbox' rows="4" cols="50" readOnly='true'>
</textarea>
<br> 
<input type='button' id='starttyping' value='Start Typing' onclick='$( "#outputtextbox" ).focus();'>
</form>

<div id='letterdisplay' class='tocenter'></div>
<div id='messagebox' class='tocenter'></div>

<script> 
$('#letterdisplay').html( '&nbsp;' ); 
var startmessage = 'After inserting text to type (in first box), and placing the cursor where you want to begin, click the "Start Typing" button.';  
$('#messagebox').html( startmessage );   

function keypress_outputtextbox(event)
{
var letter = event.key;
var lowercaseletter = letter.toLowerCase();   
 
//get current letter
var inputtextbox= document.getElementById('inputtextbox');
var outputtextbox = document.getElementById('outputtextbox');
var startPosition = outputtextbox.selectionStart;
  
var targetletter = outputtextbox.value.substring(startPosition, startPosition+1); //ff + chrome

if ( ignorecase )
  {
  letter = letter.toLowerCase();
  targetletter = targetletter.toLowerCase();
  }
  
if (targetletter === letter)
  {//we typed correct letter
  $('#letterdisplay').html(letter); 
  if ( document.getElementById('letteraftersound').checked == true )
    {
    playAudio(lowercaseletter);
    }
  //cursor + 1
  outputtextbox.selectionStart = startPosition + 1;
  outputtextbox.selectionEnd = startPosition + 2;
  inputtextbox.selectionStart = startPosition + 1;
  inputtextbox.selectionEnd = startPosition + 2;   
  }
 else
   {//we typed wrong letter
   if ( document.getElementById('errorsound').checked == true )
       {
       playAudio('error');
       }
   $('#letterdisplay').html('<font color="red">XXXXXXXXXXXXX</div>');
   } 
//refocus for IE. FU IE!!!!!
$('#outputtextbox').focus();
}
  
function keyup_outputtextbox(event)
{
$('#letterdisplay').html('&nbsp;');  
}
  
function focus_outputtextbox() 
{
copy_inputtextbox_outputtextbox();

var inputtextbox = document.getElementById('inputtextbox');
var startPosition = inputtextbox.selectionStart;

var outputtextbox = document.getElementById('outputtextbox');
outputtextbox.selectionStart = startPosition;
outputtextbox.selectionEnd = startPosition + 1;
var targetletter = outputtextbox.value.substring(startPosition, startPosition+1);
var lowercaseletter = targetletter.toLowerCase();   
if ( document.getElementById('letterbeforesound').checked == true )
    {
    playAudio(lowercaseletter);
    }

$('#messagebox').html('Start typing where the highlighted cursor is.'); 
}
  
function copy_inputtextbox_outputtextbox()
{
//copy input text to output text
var t = $( "#inputtextbox" ).val( );
$( "#outputtextbox" ).val( t );
}
  
//bind event hanlers
$( "#inputtextbox" ).keypress(copy_inputtextbox_outputtextbox) 
$( "#inputtextbox" ).focusin( function(){$('#messagebox').html( startmessage )} );
$( "#outputtextbox" ).focusin( focus_outputtextbox ); 
$( "#outputtextbox" ).keypress( keypress_outputtextbox );
$( "#outputtextbox" ).keyup( keyup_outputtextbox );
  
//sound url array  
var global_wav_url = {};
global_wav_url['a'] = 'https://www.emogic.com/TypingTutor/A.mp3';
global_wav_url['b'] = 'https://www.emogic.com/TypingTutor/B.mp3';
global_wav_url['c'] = 'https://www.emogic.com/TypingTutor/C.mp3';
global_wav_url['d'] = 'https://www.emogic.com/TypingTutor/D.mp3';
global_wav_url['e'] = 'https://www.emogic.com/TypingTutor/E.mp3';
global_wav_url['f'] = 'https://www.emogic.com/TypingTutor/F.mp3';
global_wav_url['g'] = 'https://www.emogic.com/TypingTutor/G.mp3';
global_wav_url['h'] = 'https://www.emogic.com/TypingTutor/H.mp3';
global_wav_url['i'] = 'https://www.emogic.com/TypingTutor/I.mp3';
global_wav_url['j'] = 'https://www.emogic.com/TypingTutor/J.mp3';
global_wav_url['k'] = 'https://www.emogic.com/TypingTutor/K.mp3';
global_wav_url['l'] = 'https://www.emogic.com/TypingTutor/L.mp3';
global_wav_url['m'] = 'https://www.emogic.com/TypingTutor/M.mp3';
global_wav_url['n'] = 'https://www.emogic.com/TypingTutor/N.mp3';
global_wav_url['o'] = 'https://www.emogic.com/TypingTutor/O.mp3';
global_wav_url['p'] = 'https://www.emogic.com/TypingTutor/P.mp3';
global_wav_url['q'] = 'https://www.emogic.com/TypingTutor/Q.mp3';
global_wav_url['r'] = 'https://www.emogic.com/TypingTutor/R.mp3';
global_wav_url['s'] = 'https://www.emogic.com/TypingTutor/S.mp3';
global_wav_url['t'] = 'https://www.emogic.com/TypingTutor/T.mp3';
global_wav_url['u'] = 'https://www.emogic.com/TypingTutor/U.mp3';
global_wav_url['v'] = 'https://www.emogic.com/TypingTutor/V.mp3';
global_wav_url['w'] = 'https://www.emogic.com/TypingTutor/W.mp3';
global_wav_url['x'] = 'https://www.emogic.com/TypingTutor/X.mp3';
global_wav_url['y'] = 'https://www.emogic.com/TypingTutor/Y.mp3';
global_wav_url['z'] = 'https://www.emogic.com/TypingTutor/Z.mp3';
global_wav_url['space'] = 'https://www.emogic.com/TypingTutor/space.mp3';

global_wav_url['error'] = 'https://www.emogic.com/TypingTutor/Windows Error.mp3';
global_wav_url['tick'] = 'https://www.emogic.com/TypingTutor/ButtonRelease.mp3';

var speak = document.getElementById("myAudio"); 
function playAudio(letter) 
{ 
 if ( letter === ' ' ) 
   {
   letter = 'space';
   }
 if ( global_wav_url[letter] === undefined ) 
    {//nothing in array - default sound
    speak.src = 'https://www.emogic.com/TypingTutor/ButtonRelease.mp3';
    }
  else
  {
  speak.src = global_wav_url[letter];
  }    
speak.play(); 
} 

function pauseAudio() 
{ 
speak.pause(); 
}
  
//not used now
function mygetSelection() 
{
var selobj;
if (!!window.getSelection)   
  {
  selobj = window.getSelection();
  return selobj.text 
  }; //ie?
if (document.getSelection) 
  {
  selobj = document.getSelection();
  return selobj.toString()
  } ; //chrome

selobj = document.selection.createRange(); 
return ( selobj.text ); //ff?

var userSelection;
if (window.getSelection) 
  {
	userSelection = window.getSelection();
  }
else if (document.selection) 
  { // should come last; Opera!
	userSelection = document.selection.createRange();
  }
  //ff userSelection
  //ie userSelection.text
  // 
}
  
function whatIsThis()
{
var text = 'This is for people who are cannot type or who are starting out. IE: Me. It is for getting a sense for where the letters are and just practicing that at a slower pace. If you are looking for a program to verifying your touch typing skill, look elsewhere.';

alert(text);
}
  
</script>

  </body>
</html>
